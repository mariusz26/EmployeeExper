<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 


<ui:composition template="/resources/szablon/szablon.xhtml">

<ui:define name="content">

	
	<h:form id="formListaUzytkownikow">	
		
		<p:messages id="message" globalOnly="true" showDetail="true" showSummary="false" closable="true" errorStyle="color:red;" infoStyle="color:blue;" warnStyle="color:black" />
		<p:growl id="msgs" showDetail="true" showSummary="true" sticky="false" life="900" /> 
		
		<p:dataTable id="tabelaUserow" var="user" value="#{listaUserowForm.lazyModel}" style=" text-align: center" 
				widgetVar="userTable"
                emptyMessage="#{msgs.auth_notFoundUser}" 
                scrollable="true" scrollHeight="350" 
                editable="true" 
                paginator="true"
                lazy="true"
                rows="10"
                paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                rowsPerPageTemplate="10,20,50" >
                
               
           <p:ajax event="rowEdit" listener="#{listaUserowForm.onRowEdit}" update="@form:msgs"/> 
           <p:ajax event="rowEditCancel" listener="#{listaUserowForm.onRowCancel}" update="@form:msgs"/> 
            
          	<f:facet name="header">
          		<h:outputText value="#{msgs.auth_listaUserow}" style="text-align:center"/>
            </f:facet>
                         

            <p:column   headerText="#{msgs.auth_login}" sortBy="#{user.login}"  filterBy="#{user.login}">
            	<p:cellEditor>
            		<f:facet name="output"><h:outputText value="#{user.login}" /></f:facet>
            	    <f:facet name="input"><p:inputText id="Input" value="#{user.login}"  style="width:100%;height:100%" disabled="true"/></f:facet>          		 
            	</p:cellEditor>	
            </p:column>
         
			<p:column headerText="#{msgs.auth_haslo}">
				<p:cellEditor>
					<f:facet name="output"><h:outputText value="#{user.haslo}" /></f:facet> 
					<f:facet name="input"><p:inputText value="#{user.haslo}" style="width:100%;height:100%"/></f:facet>
				</p:cellEditor>
			</p:column>	 		
			 
			<p:column  headerText="#{msgs.auth_status}" >
			  <p:cellEditor>
           		
               <f:facet name="output"><h:outputText value="#{user.status ? 'true': 'false'}" /> </f:facet>
               
               <f:facet name="input">
                   <h:selectOneMenu value="#{user.status}" style="width:100%;height:100%"  >
                       <f:selectItem itemValue="true" itemLabel="True" />
                       <f:selectItem itemValue="false" itemLabel="False" />
                   </h:selectOneMenu>
               </f:facet>
                
              </p:cellEditor>
       	    </p:column>					 	
		 	 
			<p:column  headerText="#{msgs.auth_isActive}" >
			  <p:cellEditor>
            	
               <f:facet name="output"><h:outputText value="#{user.aktywne ? 'true': 'false'}" /></f:facet>
               
               <f:facet name="input">
                   <h:selectOneMenu value="#{user.aktywne}" style="width:100%;height:100%"  >
                       <f:selectItem itemValue="true" itemLabel="True" />
                       <f:selectItem itemValue="false" itemLabel="False" />
                   </h:selectOneMenu>
               </f:facet>
               
              </p:cellEditor>
			</p:column>
				
			 
			<p:column  width="80" >
			 <f:facet name="header">
			   <h:outputText id="head" value="Prób..." />
			   <p:tooltip id="toolTipGrow" for="head" value="#{msgs.auth_numberTrayLogin}" showEffect="clip" hideEffect="explode" />	
			 </f:facet>
			  <p:cellEditor>		
				<f:facet name="output"><h:outputText value="#{user.liczaProbLogowania}" /></f:facet>
				
				<f:facet name="input">
					<p:selectOneMenu id="liczbaprub" value="#{user.liczaProbLogowania}" style="width:100%;height:100%">
               		<f:selectItem itemLabel="1" itemValue="1"/>
               		<f:selectItem itemLabel="2" itemValue="2"/>
               		<f:selectItem itemLabel="3" itemValue="3"/>
               </p:selectOneMenu> 
				</f:facet>
			  </p:cellEditor>	  
			 
			</p:column>
			
			
			<p:column headerText="#{msgs.auth_waznoscOd}" width="100">
			  <p:cellEditor>
				<f:facet name="output">
					<h:outputText value="#{user.waznoscKontaOd}">
				 		<f:convertDateTime pattern="yyyy-MM-dd"/>
				    </h:outputText>
				</f:facet>
				<f:facet name="input">
					<p:calendar id="konto_od" value="#{user.waznoscKontaOd}" locale="pl" navigator="true" pattern="yyyy-MM-dd"  converterMessage="Wprowadzono niepoprawny format daty"  required="true"  requiredMessage="Uzupełnij pole!"/>
				</f:facet>
			  </p:cellEditor>	
			</p:column>
		
		
			<p:column headerText="#{msgs.auth_waznoscDo}" width="100">
			  <p:cellEditor>
				<f:facet name="output">
					<h:outputText value="#{user.waznoscKontaDo}">
				 		<f:convertDateTime pattern="yyyy-MM-dd"/>
				    </h:outputText>
				</f:facet>
				<f:facet name="input">
					<p:calendar id="konto_do" value="#{user.waznoscKontaDo}" locale="pl" navigator="true" pattern="yyyy-MM-dd"  converterMessage="Wprowadzono niepoprawny format daty"  required="true"  requiredMessage="Uzupełnij pole!"/>
				</f:facet>
			  </p:cellEditor>	
			</p:column>
						
	  
			<p:column style="width:42px" >
				<p:rowEditor />
			</p:column>	
			   	    	
			<p:column id="a" headerText="#{msgs.auth_delete}" width="50">
			 
			  	<p:commandLink actionListener="#{listaUserowForm.usunUzytkownikaAkcja()}" update="tabelaUserow,@form:message">
					<h:graphicImage name="delete.png" library="grafika" style="border:none;" width="24" height="24" alt="usuńUzytkownika"/>				  	
					<p:confirm header="Potwierdzenie" message="Czy napewno chcesz usunąć.?" icon="ui-icon-alert"/>
					<f:param name="login" value="#{user.login}"/>	
				</p:commandLink>

				<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
					 <p:commandButton value="Tak" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
        			 <p:commandButton value="Nie" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
				</p:confirmDialog>
			  		
			 </p:column>
	
		</p:dataTable>
	  
	</h:form>
		
		


</ui:define>
</ui:composition> 
</html>
